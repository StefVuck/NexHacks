# Pittsburgh Traffic Monitoring System - Quick Start Guide

## ğŸ‰ Your Traffic Simulator is Ready!

I've created a complete Pittsburgh traffic monitoring system that generates CSV data from 50 road sensors across the city with a **live ticker** showing real-time progress.

## ğŸ”§ How It Works

**Important**: CSV data is generated by **firmware running in QEMU** (ARM emulator), not by Python directly.

The process:
1. **Claude AI** generates embedded C firmware for each sensor
2. **Firmware is compiled** to ARM binary using arm-none-eabi-gcc
3. **Binary runs in QEMU** ARM emulator (simulated microcontroller)
4. **Firmware outputs CSV** data via serial/semihosting (Woodwide AI integration)
5. **CSV data is captured** from QEMU output and saved to files

This demonstrates how real microcontrollers would generate and export CSV data using the Woodwide AI integration.

## ğŸš€ Quick Start

### Run with 2 Sensors (Quick Test)

```bash
source .venv/bin/activate
python scripts/pittsburgh_traffic_simulator.py --sensors 2
```

### Run with All 50 Sensors

```bash
python scripts/pittsburgh_traffic_simulator.py --sensors 50
```

### Preview Mode (No File Saving)

```bash
python scripts/pittsburgh_traffic_simulator.py --sensors 5 --no-save
```

## ğŸ“Š What You'll See

### Live Ticker Display

```
ğŸš— PITTSBURGH TRAFFIC MONITORING SYSTEM - CSV DATA GENERATOR ğŸš—
================================================================================
ğŸ“ Monitoring 50 road locations across Pittsburgh
ğŸ“Š Generating CSV data with traffic metrics
â±ï¸  Data export interval: 60 seconds
================================================================================

ğŸ¯ Generating firmware for 2 sensors...
ğŸ’¾ CSV output will be saved to files

================================================================================

ğŸš€ Starting firmware generation...

[09:05:23] ğŸ”„ Sensor  1 | I-376_East_Squirrel_Hill        | Generating firmware...
[09:05:28] âœ… Sensor  1 | I-376_East_Squirrel_Hill        | âœ“ CSV data ready (5.2s)

ğŸ“ˆ Progress: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 50.0% (1/2 complete, 0 failed)

[09:05:30] ğŸ”„ Sensor  2 | I-376_West_Oakland              | Generating firmware...
[09:05:35] âœ… Sensor  2 | I-376_West_Oakland              | âœ“ CSV data ready (10.5s)

ğŸ“ˆ Progress: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100.0% (2/2 complete, 0 failed)
```

### CSV Data Preview

```
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“Š CSV Data Preview - road_sensor_1
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  timestamp,node_id,location,frequency_of_cars_ph,average_speed_kmh,traffic_density_percent,heavy_vehicle_ratio,ambient_temperature,road_surface_temp,congestion_level
  1000,road_sensor_1,I-376_East_Squirrel_Hill,1250,85.3,45.2,0.15,22.5,28.3,2
  2000,road_sensor_1,I-376_East_Squirrel_Hill,1380,82.1,48.7,0.18,22.6,28.5,2
  3000,road_sensor_1,I-376_East_Squirrel_Hill,1520,78.4,52.3,0.21,22.7,28.7,3
  ... (97 more rows)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

### Final Summary

```
================================================================================
ğŸ“ˆ FINAL SUMMARY
================================================================================
âœ… Successful: 2/2 sensors
âŒ Failed: 0/2 sensors
â±ï¸  Total time: 12.3s
ğŸ“ CSV files saved to: output/pittsburgh_traffic
ğŸ“Š Total CSV files: 2
================================================================================

ğŸ“Š Combined CSV created: output/pittsburgh_traffic/all_sensors_combined.csv
   Total rows: 200
```

## ğŸ“ Output Files

All CSV files are saved to `output/pittsburgh_traffic/`:

```
output/pittsburgh_traffic/
â”œâ”€â”€ road_sensor_1.csv                  # I-376 East Squirrel Hill
â”œâ”€â”€ road_sensor_2.csv                  # I-376 West Oakland
â”œâ”€â”€ road_sensor_3.csv                  # I-279 North Perry
â”œâ”€â”€ ...
â”œâ”€â”€ road_sensor_50.csv                 # Brownsville Rd Brentwood
â””â”€â”€ all_sensors_combined.csv           # All sensors combined
```

## ğŸ“Š CSV Data Format

Each sensor generates data with these fields:

| Field | Range | Description |
|-------|-------|-------------|
| `timestamp` | - | Milliseconds since boot |
| `node_id` | - | Sensor identifier (road_sensor_1, etc.) |
| `location` | - | Road location name |
| `frequency_of_cars_ph` | 50-3000 | Cars per hour |
| `average_speed_kmh` | 15-110 | Average speed in km/h |
| `traffic_density_percent` | 5-95 | Traffic density percentage |
| `heavy_vehicle_ratio` | 0.05-0.30 | Ratio of heavy vehicles |
| `ambient_temperature` | -10 to 40 | Temperature in Celsius |
| `road_surface_temp` | ambient+5-15 | Road surface temperature |
| `congestion_level` | 0-4 | Congestion level (0=free, 4=gridlock) |

## ğŸ—ºï¸ Monitored Locations (50 Total)

### Major Highways (7)
- I-376 East (Squirrel Hill)
- I-376 West (Oakland)
- I-279 North (Perry)
- I-279 South (Downtown)
- I-579 (Liberty Bridge)
- US-19 (McKnight Road)
- PA-28 (Highland Park)

### Downtown & Central (8)
- Liberty Ave, Penn Ave, Forbes Ave, Fifth Ave
- Smithfield St, Grant St, Boulevard of Allies, Bigelow Blvd

### East End (8)
- Penn Ave, Negley Ave, Centre Ave, Baum Blvd
- Murray Ave, Forbes Ave, Wilkins Ave, Beechwood Blvd

### North Side (5)
- East Ohio St, Federal St, Brighton Road
- Perry Highway, Babcock Blvd

### South Side & South Hills (8)
- Carson St, East Carson St, Brownsville Rd
- West Liberty Ave, Banksville Rd, Saw Mill Run Blvd
- Route 51, Castle Shannon Blvd

### West End (5)
- West Carson St, Steuben St, Noblestown Rd
- Corliss St, Chartiers Ave

### East Suburbs (5)
- Ardmore Blvd, Frankstown Rd, Saltsburg Rd
- Braddock Ave, Greensburg Pike

### Additional Routes (4)
- McKnight Rd, Freeport Rd, Washington Rd
- Clairton Blvd, Brownsville Rd

## âš™ï¸ How It Works

1. **Firmware Generation**: Claude AI generates embedded C code for each sensor
2. **CSV Detection**: System automatically detects CSV requirements from description
3. **Code Injection**: CSV buffer management and export code is added
4. **QEMU Simulation**: Firmware runs in ARM emulator
5. **Data Extraction**: CSV output is captured from simulation
6. **File Export**: Individual and combined CSV files are created

## ğŸ“ˆ Performance

- **Single Sensor**: ~5-10 seconds
- **5 Sensors**: ~45-60 seconds
- **50 Sensors**: ~8-12 minutes

*Times vary based on Claude API response time*

## ğŸ’¡ Use Cases

1. **Traffic Analysis**: Analyze patterns across Pittsburgh
2. **Data Visualization**: Import into Excel, Tableau, or Python
3. **Machine Learning**: Train traffic prediction models
4. **Urban Planning**: Support infrastructure decisions
5. **Rush Hour Monitoring**: Identify congestion hotspots

## ğŸ“Š Analyze the Data

### Python Analysis

```python
import pandas as pd

# Load combined data
df = pd.read_csv('output/pittsburgh_traffic/all_sensors_combined.csv')

# Average speed by location
print(df.groupby('location')['average_speed_kmh'].mean().sort_values())

# Busiest roads
print(df.groupby('location')['frequency_of_cars_ph'].mean().sort_values(ascending=False))

# Congestion hotspots
print(df[df['congestion_level'] >= 3]['location'].value_counts())
```

### Visualization

```python
import matplotlib.pyplot as plt

# Traffic density by location
df.groupby('location')['traffic_density_percent'].mean().plot(kind='barh', figsize=(12, 10))
plt.title('Average Traffic Density by Location')
plt.xlabel('Density %')
plt.tight_layout()
plt.savefig('traffic_density.png')
```

## ğŸ› ï¸ Troubleshooting

### ANTHROPIC_API_KEY not set
```bash
export ANTHROPIC_API_KEY=sk-ant-your-key-here
```

### Module not found
```bash
source .venv/bin/activate
pip install -r requirements.txt
```

### Too slow
Start with fewer sensors:
```bash
python scripts/pittsburgh_traffic_simulator.py --sensors 2
```

## ğŸ“š Documentation

- **Full Guide**: `scripts/PITTSBURGH_TRAFFIC_README.md`
- **CSV Integration**: `WOODWIDE_INTEGRATION.md`
- **API Reference**: `INTEGRATION.md`

## âœ¨ What's Included

âœ… **50 Road Sensors** across Pittsburgh  
âœ… **Live Ticker** with real-time progress  
âœ… **CSV Data Export** with 9 traffic metrics  
âœ… **Automatic File Saving** to `output/` directory  
âœ… **Combined CSV** for easy analysis  
âœ… **Color-Coded Status** (ğŸ”„ Running, âœ… Success, âŒ Failed)  
âœ… **Progress Bar** showing completion percentage  
âœ… **Data Preview** for first 3 sensors  
âœ… **Comprehensive Documentation**  

## ğŸ¯ Ready to Run!

```bash
# Quick test with 2 sensors
source .venv/bin/activate
export ANTHROPIC_API_KEY=sk-ant-your-key-here
python scripts/pittsburgh_traffic_simulator.py --sensors 2

# Full simulation with all 50 sensors
python scripts/pittsburgh_traffic_simulator.py --sensors 50
```

---

**Status**: âœ… Ready to Use  
**Created**: 2026-01-18  
**Location**: `scripts/pittsburgh_traffic_simulator.py`
